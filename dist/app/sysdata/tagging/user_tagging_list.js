"use strict";_SL.nmspc("tagging").list=function(){var a={urlList:gCONTEXT_PATH+"sysdata/user_tagging_list.json",urlForm:gCONTEXT_PATH+"sysdata/user_tagging_form.html",urlApply:gCONTEXT_PATH+"sysdata/user_tagging_apply.do",urlExport:gCONTEXT_PATH+"sysdata/user_tagging_select_export.do",formId:"#searchUserTaggingList",gridId:"#gridUserTaggingList",formSubId:"#formSub"},b={form:$(a.formId),grid:$(a.gridId),formSub:$(a.formSubId)},c=function(){var c=b.grid.parent().siblings(".grid-bottom").find(".btn-add"),h=b.grid.parent().siblings(".grid-bottom").find(".btn-export"),j=b.grid.parent().siblings(".grid-bottom").find(".btn-apply");d(b.grid),b.form.find(".form-submit").off().on("click",function(){e()}),c.off().on("click",function(){f(a.urlForm,!1)}),h.off().on("click",function(){g()}),j.off().on("click",function(){i()})},d=function(b){var c={datatype:"json",datafields:[{name:"mng_id",type:"string"},{name:"mng_name",type:"string"},{name:"mng_type",type:"string"},{name:"mng_cate_cd",type:"string"},{name:"mng_cate_nm",type:"string"},{name:"ref_query",type:"string"},{name:"description",type:"string"},{name:"proc_id",type:"string"},{name:"proc_ip",type:"string"},{name:"proc_dt",type:"string"}],root:"rows",beforeprocessing:function(a){null!=a&&(c.totalrecords=a.totalRows)},cache:!1,url:a.urlList},d=new $.jqx.dataAdapter(c,{formatData:function(b){var c,d={},e=$(a.formId).serializeArray();for(c in e)d[e[c].name]=e[c].value;return $.extend(b,d),b},loadError:function(a,b,c){alert(c)}});b.jqxGrid({source:d,sortable:!1,width:"100%",selectionmode:"checkbox",virtualmode:!0,enablehover:!1,rendergridrows:function(a){return a.data},columns:[{text:"No",columntype:"number",width:40,cellsalign:"center",cellsrenderer:function(a,b,c,d){return $(d).text(c+1)[0].outerHTML}},{text:"관리ID",datafield:"mng_id",cellsrenderer:function(a,b,c,d,e,f){return $(d).html('<button type="button" class="btn-link">'+c+"</button>")[0].outerHTML}},{text:"관리명",datafield:"mng_name"},{text:"분류",datafield:"mng_cate_nm",cellsalign:"center",width:"15%"},{text:"종류",datafield:"mng_type",cellsalign:"center",width:"15%",cellsrenderer:function(a,b,c,d,e,f){return 1==c?$(d).text("수동")[0].outerHTML:$(d).text("SQL")[0].outerHTML}},{text:"처리자ID",datafield:"proc_id",width:"15%",cellsalign:"center"}]}),b.on("cellclick",function(b){if("mng_id"===b.args.datafield){var c=b.args.row.bounddata.mng_id;f(a.urlForm+"?mng_id="+c,!0)}})},e=function(){b.grid.jqxGrid("updatebounddata"),b.grid.jqxGrid("clearselection")},f=function(a,b){new ModalPopup(a,{width:800,height:560,setScroll:b,onClose:function(){e()}})},g=function(){var a=[],c=b.grid.jqxGrid("selectedrowindexes"),d=b.grid.jqxGrid("getdisplayrows"),e=[];for(var f in d)for(var g=0,i=c.length;g<i;g++)c[g]==d[f].boundindex&&e.push(d[f].boundindex);if(e.length>0){for(var g in e){var j=b.grid.jqxGrid("getrowdata",e[g]);if(!j)break;a.push(j.mng_id)}h(a)}else _alert("선택된 목록이 없습니다.")},h=function(c){b.formSub.find("[name=chk_export]").val(c),b.formSub.attr({action:a.urlExport,method:"post"}).submit()},i=function(){_confirm("적용 하시겠습니까?",{onAgree:function(){$("body").requestData(a.urlApply,{},{callback:function(a,b,c){"SUC_COM_0000"==b?_alert("적용 되었습니다."):_alert("적용 중 에러가 발생했습니다.<br> 다시 실행하세요.")}})}})};return{init:c}}(),$(function(){slapp.tagging.list.init(),$("#btnManageDataSource").togglePage(gCONTEXT_PATH+"sysdata/com_db_list.html")});