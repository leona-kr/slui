"use strict";_SL.nmspc("comcode").list=function(){var a={urlList:gCONTEXT_PATH+"sysdata/comcode_list.json",urlForm:gCONTEXT_PATH+"sysdata/comcode_form.html",urlDownload:gCONTEXT_PATH+"sysdata/comcode_export.do",urlImport:gCONTEXT_PATH+"sysdata/comcode_import_form.html",formId:"#searchComcodeList",gridId:"#gridComcodeList"},b={form:$(a.formId),grid:$(a.gridId)},c=function(){var c=b.grid.parent().siblings(".grid-bottom").find(".btn-add"),f=b.form.find(".btn-download"),i=b.grid.parent().siblings(".grid-bottom").find(".btn-import");d(b.grid),b.form.find(".form-submit").off().on("click",function(){_SL.validate(b.form)&&e()}),b.form.find("[name=s_code_type]").change(e),c.off().on("click",function(){g(a.urlForm+"?code_type="+b.form.find("[name=s_code_type]").val())}),f.off().on("click",function(){h()}),i.off().on("click",function(){new ModalPopup(a.urlImport+"?s_code_type="+b.form.find("[name=s_code_type]").val(),{width:500,height:215,onClose:function(){e()}})})},d=function(b){var c={datatype:"json",datafields:[{name:"code_type",type:"string"},{name:"code_id",type:"string"},{name:"code_name",type:"string"},{name:"flag1",type:"string"},{name:"flag2",type:"string"},{name:"code_cont",type:"string"},{name:"user_view",type:"string"}],root:"rows",beforeprocessing:function(a){null!=a&&(c.totalrecords=a.totalRows)},cache:!1,url:a.urlList},d=new $.jqx.dataAdapter(c,{formatData:function(b){var c,d={},e=$(a.formId).serializeArray();for(c in e)d[e[c].name]=e[c].value;return $.extend(b,d),b},loadComplete:function(){f()},loadError:function(a,b,c){alert(c)}});b.jqxGrid({source:d,width:"100%",virtualmode:!0,rendergridrows:function(a){return a.data},columns:[{text:"No",columntype:"number",width:40,cellsalign:"center",cellsrenderer:function(a,b,c,d){return $(d).text(c+1)[0].outerHTML}},{text:"코드",datafield:"code_id",width:"15%",cellsalign:"center"},{text:"코드명",datafield:"code_name",width:"40%",cellsalign:"center",cellsrenderer:function(a,b,c,d,e,f){return $(d).html('<button type="button" class="btn-link hasTooltip" data-value="'+c+'">'+c+"</button>")[0].outerHTML}},{text:"설명",datafield:"code_cont",cellsalign:"center"}]}),b.on("cellclick",function(b){if("code_name"===b.args.datafield){var c=b.args.row.bounddata;g(a.urlForm+"?code_id="+c.code_id+"&code_type="+c.code_type)}})},e=function(){b.grid.jqxGrid("updatebounddata"),f()},f=function(){setTimeout(function(){$(".hasTooltip").each(function(){var a=$(this).data("value");$(this).jqxTooltip({position:"mouse",content:a})})},500)},g=function(a){new ModalPopup(a,{height:455,onClose:function(){e()}})},h=function(){b.form.attr({action:a.urlDownload}).submit()};return{init:c}}(),$(function(){slapp.comcode.list.init(),$("#btnManageCode").togglePage(gCONTEXT_PATH+"sysdata/comcode_type_list.html"),$("#btnSettingCodeBook").togglePage(gCONTEXT_PATH+"sysdata/code_book_list.html")});