"use strict";_SL.nmspc("alarm").histroyList=function(){var a,b={urlList:gCONTEXT_PATH+"monitoring/alarm_history_list.json",alarmDivId:".group-alarm-history",infoPageId:"#formInfoPage"},c={alarmDiv:$(b.alarmDivId),infoPage:$(b.infoPageId)},d=function(){e()},e=function(){$("body").requestData(b.urlList,{},{displayLoader:!0,callback:function(b,d,e){var f=b.list;a=f;var g,h=$("<div class='alarms-area'>"),i=0;if(f.length>0){for(;i<f.length;){for(var j=f[i],k=$("<div class='alarm-item'>"),l=$("<div class='time-label'><i class='icon-clock'></i>"+_SL.formatDate(j.event_hour,"HHmm","HH:mm")+"</div>"),m=$("<div class='message'>"),n=$("<div class='cnt'><strong>"+j.grp_cnt+"</strong>건 발생</div>"),o="",p=0;p<j.grp_cnt;p++)f[i+p].info_page?(g="javascript:slapp.alarm.histroyList.linkInfoPage('"+parseInt(i+p)+"')",o+='<a href="'+g+'">'+f[i+p].alarm_nm+" "+f[i+p].alarm_deco+"</a><br>"):o+=f[i+p].alarm_nm+" "+f[i+p].alarm_deco+"<br>";var q=$('<div class="txt">'+o+"</div>");m.append(n).append(q),k.append(l).append(m),h.append(k),i+=j.grp_cnt}c.alarmDiv.append("<div class='date-label'>"+_SL.formatDate(j.event_day,"yyyyMMdd","yyyy년 MM월 dd일")+"</div>"),c.alarmDiv.append(h)}else c.alarmDiv.addClass("list-empty").text("최근 알람이 없습니다")}})},f=function(b){var d,e,f=a[b];switch(f.alarm_cd){case"4":d=_SL.formatDate.addMin(f.event_time,-4),e=_SL.formatDate.addMin(f.event_time,-3);break;case"5":d=_SL.formatDate.addMin(f.event_time,-3),e=_SL.formatDate.addMin(f.event_time,-2);break;default:d=_SL.formatDate.addMin(f.event_time,-1),e=f.event_time}c.infoPage[0].reset(),c.infoPage.find("[name=start_time]").val(d),c.infoPage.find("[name=end_time]").val(e);var g="infoPageWin_"+(new Date).getTime();c.infoPage.attr({action:f.info_page,target:g,method:"post"}).submit()};return{init:d,linkInfoPage:f}}(),$(function(){slapp.alarm.histroyList.init()});