"use strict";_SL.nmspc("mylogs").form=function(){var a={urlSubmitLink:gCONTEXT_PATH+"monitoring/mylogs_list.html",urlDeleteLink:gCONTEXT_PATH+"monitoring/mylogs_delete.do",urlUpdateLink:gCONTEXT_PATH+"monitoring/mylogs_update.do",form:$("#mylogs_form")},b=function(){gSetting.use_delete||$("#bt_del").hide(),$("#share_yn").attr("title",tooltip1),"Y"==$("#yn_shared").val()?$("#share_yn input:radio[name=share_yn]:input[value='Y']").prop("checked",!0):$("#share_yn input:radio[name=share_yn]:input[value='N']").prop("checked",!0),e(),$('input[name="share_yn"]:radio').on("change",function(a){e()}),$("form").keydown(function(a){"13"==a.which&&_SL.enterNext()}),$("#detail-add").click(function(){var a=1==$(this).data("after-close");c(a)}),$("#detail-delete").click(function(){var a=1==$(this).data("after-close");d(a)}),$("#detail-cancel").click(function(){var a=1==$(this).data("after-close");h(a)}),$("#yn_shared").val()},c=function(b){$("#share_group_list,#share_user_list").prop("disabled",!1),$("#share_group_list option").each(function(){$(this).selected=!0}),$("#share_user_list option").each(function(){$(this).selected=!0});var c=$.extend({},_SL.serializeMap($("#mylogs_form")));$("body").requestData(a.urlUpdateLink,c,{callback:function(a,c,d){_alert(d,{onAgree:function(){h(b)}})}})},d=function(b){_confirm("삭제 하시겠습니까?",{onAgree:function(){var c=$.extend({},_SL.serializeMap($("#mylogs_form")));$("body").requestData(a.urlDeleteLink,c,{callback:function(a,c,d){_alert("처리되었습니다",{onAgree:function(){h(b)}})}})}})},e=function(){"N"==$("#share_yn :input:radio[name=share_yn]:checked").val()?($("#user_cust_list,#share_group_list,#share_user_list").attr("disabled",!0),$("#share_group_list option","#share_user_list option").each(function(){this.selected=!1}),$("#group_btn,#user_btn").css("opacity","0.3"),$("#group_btn,#user_btn").css("cursor","default"),$("#cust_add,#cust_del,#user_add,#user_del").unbind("click"),$("#share_group_list option,#share_user_list option").each(function(){this.selected=!1})):($("#user_cust_list,#share_group_list,#share_user_list").attr("disabled",!1),$("#group_btn,#user_btn").css("opacity","1.0"),$("#group_btn,#user_btn").css("cursor","pointer"),f())},f=function(){$("#cust_add,#cust_del,#user_add,#user_del").unbind("click"),$("#cust_add").click(function(){var a=$("#user_cust_list option:selected").val(),b=$("#user_cust_list option:selected").text();return""==a?void _alert("기관을 선택하세요."):$("#share_group_list option").is(function(){return this.value==a})?void _alert("동일한 기관이 존재합니다."):void $("#share_group_list").append("<option value='"+a+"'>"+b+"</option>")}),$("#cust_del").click(function(){$("#share_group_list :selected").remove()}),$("#user_del").click(function(){$("#share_user_list :selected").remove()}),$("#user_add").exModalPopup("/system/comuser_list_to_select.html?menu_idx=multi&popup=y",{width:550,height:300,onClose:function(){g()}})},g=function(){var a,b,c,d,e,f=slapp.user.listSel.getParam(),g=f.userDataArr,h=(f.userIdx,$("#share_user_list")),i=0,j=!1,k="";for(var l in g)a=g[l],b=a.user_id,c=a.user_nm,d=a.mobile_no,e=a.mail_addr,0==h.length?$("#share_user_list").append("<option value='"+b+"'>"+c+" ["+b+"]</option>"):($("#share_user_list option").each(function(){b==$(this).val()&&(i=1)}),1!=i?$("#share_user_list").append("<option value='"+b+"'>"+c+" ["+b+"]</option>"):(j?k+=", "+b:(k+="해당 ID가 이미 존재합니다.<br/>(ID : "+b,j=!0),i=0));j&&_alert(k+" )")},h=function(b){b&&a.form.find("[data-layer-close=true]").click()};return{init:b}}(),$(function(){slapp.mylogs.form.init()});