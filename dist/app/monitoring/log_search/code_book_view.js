"use strict";_SL.nmspc("logsearch").codeBookView=function(){var a={DOM:{form:"#formLogsearchCodeBook",btnAddKeyword:".btn-add-keyword"},URL:{codeBookView:gCONTEXT_PATH+"monitoring/code_book_view.json"}},b={form:$(a.DOM.form),codeId:$(a.DOM.form+" [name='code_id']"),codeInfo:$(a.DOM.form+" [name='code_info']"),btnAddKeyword:$(a.DOM.form+" "+a.DOM.btnAddKeyword)},c={},d=function(a){$.extend(c,a),b.codeId.on("change",f),b.btnAddKeyword.on("click",g),e()},e=function(){$("body").requestData(a.URL.codeBookView,{code_type:c.code_type},{displayLoader:!0,callback:function(c){b.codeId.html('<option value="-1">[선택하세요]</option>');var d,e,f,g,h;$.each(c,function(a,c){d=c.code_name,e=0,f=0;for(var i=0;i<d.length;i++)if(g=d.charCodeAt(i),h=d.substr(i,1).toUpperCase(),g=parseInt(g),(h<"0"||h>"9")&&(h<"A"||h>"Z")&&(g>255||g<0)?e+=2:e++,f++,e>100){d=d.substr(0,f)+"...";break}$("<option/>").attr({value:c.code_id,title:c.code_name}).text(d).data("info",c).appendTo(b.codeId)}),b.codeId.trigger("change"),slui.attach.setTransformSelect(a.DOM.form)}})},f=function(){if(c.code_id=b.codeId.val(),"-1"==c.code_id)return!1;var a=b.codeId.find(":selected").data("info"),d="";null!=a&&(d=d+"코드 : "+(null!=a.code_id?a.code_id:"")+"\n",d=d+"코드명 : "+(null!=a.code_name?a.code_name:"")+"\n",d=d+"부가정보1 : "+(null!=a.flag1?a.flag1:"")+"\n",d=d+"부가정보2 : "+(null!=a.flag2?a.flag2:"")+"\n",d=d+"코드설명 : "+(null!=a.code_cont?a.code_cont:"")),b.codeInfo.val(d)},g=function(){$("body").trigger("addkeyword.logsearch",[c.field_name,c.code_id]),b.form.find("[data-layer-close=true]").click()};return{init:d}}();