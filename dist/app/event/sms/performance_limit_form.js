"use strict";_SL.nmspc("sms").form=function(){var a={formId:"#formPerformLimit",urlSelect:gCONTEXT_PATH+"event/performance_limit_select.json",urlDelete:gCONTEXT_PATH+"event/performance_limit_delete.do",urlExist:gCONTEXT_PATH+"event/performance_limit_count.json",add:{action:gCONTEXT_PATH+"event/performance_limit_add.do",message:"등록 하시겠습니까?"},update:{action:gCONTEXT_PATH+"event/performance_limit_update.do",message:"수정 하시겠습니까?"}},b={form:$(a.formId),thresholdId:$(a.formId+" [name=threshold_id]"),thresholdNm:$(a.formId+" [name=threshold_name]"),cpuLow:$(a.formId+" [name=cpu_low]"),cpuMedium:$(a.formId+" [name=cpu_medium]"),cpuHigh:$(a.formId+" [name=cpu_high]"),memLow:$(a.formId+" [name=mem_low]"),memMedium:$(a.formId+" [name=mem_medium]"),memHigh:$(a.formId+" [name=mem_high]"),ioMaxLow:$(a.formId+" [name=io_max_low]"),ioMaxMedium:$(a.formId+" [name=io_max_medium]"),ioMaxHigh:$(a.formId+" [name=io_max_high]"),ioAvgLow:$(a.formId+" [name=io_avg_low]"),ioAvgMedium:$(a.formId+" [name=io_avg_medium]"),ioAvgHigh:$(a.formId+" [name=io_avg_high]"),netMaxLow:$(a.formId+" [name=net_max_low]"),netMaxMedium:$(a.formId+" [name=net_max_medium]"),netMaxHigh:$(a.formId+" [name=net_max_high]"),netAvgLow:$(a.formId+" [name=net_avg_low]"),netAvgMedium:$(a.formId+" [name=net_avg_medium]"),netAvgHigh:$(a.formId+" [name=net_avg_high]")},c={isNew:""==b.thresholdId.val(),mode:""==b.thresholdId.val()?a.add:a.update,threshold:{}},d=function(){f(),c.isNew&&b.form.find(".btn-delete").hide(),c.isNew||g()},e=function(){return c.threshold},f=function(){b.form.find(".btn-save").on("click",h),b.form.find(".btn-delete").on("click",j)},g=function(){var c=b.thresholdId.val(),d={threshold_id:c},e=function(a){_SL.setDataToForm(a.data,b.form)};$("body").requestData(a.urlSelect,d,{callback:e})},h=function(){if(_SL.validate(b.form)){if(!i(b.cpuLow.val(),b.cpuMedium.val(),b.cpuHigh.val(),2))return _alert("알맞지 않는  CPU 값입니다.");if(!i(b.memLow.val(),b.memMedium.val(),b.memHigh.val(),3))return _alert("알맞지 않는  Memory 값입니다.");if(!i(b.ioMaxLow.val(),b.ioMaxMedium.val(),b.ioMaxHigh.val(),4))return _alert("알맞지 않는  Disk Io 최대값입니다.");if(!i(b.ioAvgLow.val(),b.ioAvgMedium.val(),b.ioAvgHigh.val(),5))return _alert("알맞지 않는  Disk Io 평균값입니다.");if(!i(b.netMaxLow.val(),b.netMaxMedium.val(),b.netMaxHigh.val(),6))return _alert("알맞지 않는 Network 최대값입니다.");if(!i(b.netAvgLow.val(),b.netAvgMedium.val(),b.netAvgHigh.val(),7))return _alert("알맞지 않는  Network 평균값입니다.");var a=1==$(this).data("after-close");$("body").requestData(c.mode.action,_SL.serializeMap(b.form),{callback:function(d,e,f){"SUC_COM_0001"==e&&d&&(c.threshold.threshold_id=d,c.threshold.threshold_name=b.thresholdNm.val()),_alert(f,{onAgree:function(){l(a)}})}})}},i=function(a,b,c,d){$("#formPerformLimit tbody tr td input").css("color","");var e=!0,f=Number(a),g=Number(b),h=Number(c);return(f>=g||g>=h)&&($("#formPerformLimit tbody tr:eq("+d+") td input").css("color","red"),e=!1),e},j=function(){var c=1==$(this).data("after-close");$("body").requestData(a.urlExist,{threshold_id:b.thresholdId.val()},{callback:function(a){1==a?k(c):_alert("사용중인 장비가 있어 삭제 할 수 없습니다.")}})},k=function(c){_confirm("삭제하시겠습니까?",{onAgree:function(){$("body").requestData(a.urlDelete,{threshold_id:b.thresholdId.val()},{callback:function(a,b,d){_alert(d,{onAgree:function(){l(c)}})}})}})},l=function(a){a&&b.form.find("[data-layer-close=true]").click()};return{init:d,getThreshold:e}}(),$(function(){slapp.sms.form.init()});