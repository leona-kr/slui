"use strict";_SL.nmspc("sms").performanceList=function(){var a={s_eqp_type_cd:"",s_eqp_ip:""},b={gridId:"#gridPerformLimitList",formId:"#searchPerformLimitList",tableListId:"#performLimitTableList",urlList:gCONTEXT_PATH+"event/performance_limit_list.json",urlForm:gCONTEXT_PATH+"event/performance_limit_form.html",urlLoadEqpType:gCONTEXT_PATH+"common/eqp_type_use_list.json",urlLoadEqp:gCONTEXT_PATH+"common/equipment_list.json",urlAdd:gCONTEXT_PATH+"event/performance_limit_add.do",urlUpdate:gCONTEXT_PATH+"event/performance_limit_update.do",urlDelete:gCONTEXT_PATH+"event/performance_limit_delete.do"},c={grid:$(b.gridId),form:$(b.formId),tableList:$(b.tableListId+" tbody")},d=function(){f(),e(),c.form.find("[name=s_eqp_type_cd]").change(j),i()},e=function(){var a=c.tableList.parent().siblings(".grid-bottom").find(".btn-add");c.form.find(".form-submit").on("click",function(){return""==c.form.find("[name=s_eqp_ip]").val()&&""!=c.form.find("[name=s_eqp_type_cd]").val()?_alert("장비IP를 선택하세요"):void g()}),a.off().on("click",function(){h(b.urlForm)}),c.tableList.off().on("click",".btn-link",function(){return h(b.urlForm+"?threshold_id="+$(this).attr("data-key")),!1})},f=function(){var a=$.extend({},_SL.serializeMap(c.form));$("body").requestData(b.urlList,a,{callback:function(a,b,d){if(a){var e=a.limitList,f=e.length,g=c.tableList;if(g.empty(),f>0){for(var h=[],i=0;i<f;i++)h[i]+="<tr><td rowspan='3'><a href='#' class='btn-link' data-key='"+e[i].threshold_id+"'>"+e[i].threshold_name+"</td>",h[i]+="<td><span class='label-success'>Low</span></td>",h[i]+="<td>"+e[i].cpu_low+"</td>",h[i]+="<td>"+e[i].mem_low+"</td>",h[i]+="<td>"+e[i].io_max_low+"</td>",h[i]+="<td>"+e[i].io_avg_low+"</td>",h[i]+="<td>"+e[i].net_max_low+"</td>",h[i]+="<td>"+e[i].net_avg_low+"</td></tr>",h[i]+="<tr><td><span class='label-attention'>Middle</span></td>",h[i]+="<td>"+e[i].cpu_medium+"</td>",h[i]+="<td>"+e[i].mem_medium+"</td>",h[i]+="<td>"+e[i].io_max_medium+"</td>",h[i]+="<td>"+e[i].io_avg_medium+"</td>",h[i]+="<td>"+e[i].net_max_medium+"</td>",h[i]+="<td>"+e[i].net_avg_medium+"</td></tr>",h[i]+="<tr><td><span class='label-danger'>High</span></td>",h[i]+="<td>"+e[i].cpu_high+"</td>",h[i]+="<td>"+e[i].mem_high+"</td>",h[i]+="<td>"+e[i].io_max_high+"</td>",h[i]+="<td>"+e[i].io_avg_high+"</td>",h[i]+="<td>"+e[i].net_max_high+"</td>",h[i]+="<td>"+e[i].net_avg_high+"</td></tr>";g.append(""+h.join(","))}else g.append('<tr><td class="list-empty" colspan="8">There is no Search Result</td></tr>')}}})},g=function(){f()},h=function(a){new ModalPopup(a,{height:420,onClose:function(){g()},onUnload:function(){g()}})},i=function(){$("body").requestData(b.urlLoadEqpType,{},{callback:function(d){console.log(d);var e=c.form.find("[name=s_eqp_type_cd]");$.each(d.eqp_type_list,function(){e.append('<option value="'+this.eqp_type_cd+'">'+this.eqp_type_nm+"</option>")}),""!=a.s_eqp_type_cd&&(e.value=a.s_eqp_type_cd,a.s_eqp_type_cd="",j()),slui.attach.setTransformSelect(b.formId)}})},j=function(){var d=c.form.find("[name=s_eqp_type_cd]").val();c.form.find("[name=s_eqp_ip]").children().remove(),c.form.find("[name=s_eqp_ip]").html("<option value=''>[선택하세요]</option>"),null==d&&(d=""),""!=d&&$("body").requestData(b.urlLoadEqp,{s_eqp_type_cd:d},{callback:function(d){var e=c.form.find("[name=s_eqp_ip]");$.each(d.eqp_list,function(){e.append("<option value='"+this.eqp_ip+"'>"+this.eqp_nm+"("+this.eqp_ip+")</option>")}),""!=a.s_eqp_ip&&(e.value=a.s_eqp_ip,a.s_eqp_ip=""),slui.attach.setTransformSelect(b.formId)}})};return{init:d}}(),$(function(){slapp.sms.performanceList.init()});