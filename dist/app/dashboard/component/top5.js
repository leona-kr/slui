"use strict";var viewTop5LogSearch=function(a,b,c,d,e){var f=$("#componentbody_"+e+" [name=searchForm]");$("input[type=hidden]",f).val(""),$("[name=start_time]",f).val(a),$("[name=end_time]",f).val(b),$("[name=expert_keyword]",f).val(d);var g="TOP5_"+(new Date).getTime();f.attr({action:gCONTEXT_PATH+"monitoring/log_search.html",target:g,method:"post"}).submit()};_SL.nmspc("slapp.component").top5=function(a,b,c,d){var e=a,f=($("#componentheader_"+e),$("#componentbody_"+e)),g=$("#config_"+e+" form"),h=f.find(".sp-title"),i=f.find(".table-group"),j=i.find(".grid-table-group"),k=i.find(".grid-table-group th:nth-child(3)"),l=g.find(".label_type_tr"),m=g.find("[name=last_period]"),n=g.find("[name=label_type]"),o=g.find("[name=rows]"),p=g.find("[name=group_cd]"),q=g.find("[name=log_cate_cd]"),r=f.find("[data-name=th_field_caption]"),s=f.find("[data-name=th_asset_caption]"),t=(f.find("[name=th_asset]"),gCONTEXT_PATH+"management/equip_stat_list.html",gCONTEXT_PATH+"sysdata/comcode_map.json"),u=gCONTEXT_PATH+"component/top5_chart.json",v=(gCONTEXT_PATH+"monitoring/performance_view.html",c),w=$.parseJSON(d),x={last_period:"10",label_type:"IP",rows:"5",list_yn:"N",curDate:(new Date).getTime(),section_name:w.section_name,log_cate_cd:"",group_cd:""},y=b,z=null,A=function(){this.config_param=y=$.extend({},x,y),F=$.extend(this.chartstyles,F),F.paletteColors=F.top5Colors,B(),r.html(LogCaptionInfo[w.section_name]),F.xAxisName=w.section_name,D()},B=function(){if(ComCodes.CS0010)I();else{var a=function(a){ComCodes.CS0010=a,I()};$("body").requestData(t,{code_type:"CS0010"},{callback:a})}if(ComCodes.CS0011)J();else{var a=function(a){ComCodes.CS0011=a,J()};$("body").requestData(t,{code_type:"CS0011"},{callback:a})}},C=function(){var a,b;ComCodes.CS0010&&(a=y.log_cate_cd?ComCodes.CS0010[y.log_cate_cd]:""),ComCodes.CS0011&&(b=y.group_cd?ComCodes.CS0011[y.group_cd]:""),""==a&&""==b?h.html("<h5>전체</h5>"):""==b?h.html("<h5>로그분류 : "+a+"</h5>"):""==a?h.html("<h5>기관 : "+b+"</h5>"):h.html("<h5>기관 : "+b+" , 로그종류  : "+a+"</h5>")},D=function(a){var b=function(b){z=$.extend(!0,{},b);var c=j.find("tbody").empty(),d=!!y.label_type;if("Y"==y.list_yn){i.show();var f;d&&"ASSET"==y.label_type?(s.show(),f=4):(s.hide(),f=3),0==b.list.length&&j.append('<tr><td class="list-empty" colspan="'+f+'">There is no result.</td></tr>')}else i.hide();for(var g=0;g<b.list.length;g++){var h=w.section_name+":"+_SL.luceneValueEscape(b.list[g].label),k=(JSON.stringify(h),"javascript:viewTop5LogSearch('"+b.start_time+"', '"+b.end_time+"', '"+g+"', '"+w.section_name+":"+_SL.luceneValueEscape(z.list[g].label)+"', '"+e+"')");if("Y"==y.list_yn){var l,m=$("<tr />").append("<td>"+(g+1)+"</td>").append('<td><a href="'+k+"\" name='search_log'>"+b.list[g].label+"</a></td>").append(d&&"ASSET"==y.label_type?$("<td>").text(b.list[g].asset_name).attr("title",b.list[g].asset_name):"").append("<td>"+_SL.toComma(b.list[g].value)+"</td>").appendTo(c);w.section_name.indexOf("country_name")!=-1&&(l=b.list[g].country_code,"N/A"==b.list[g].label&&(l="N-A"),"PRN"!=l?m.find("td:eq(1)").prepend('<img src="/resources/images/flag/'+l+'.png" alt="'+l+'" width="16" height="11">'):m.find("td:eq(1)").prepend('<i class="icon-lock"></i>'))}b.list[g].link=k,d&&"ASSET"==y.label_type?(b.list[g].toolText=(""==b.list[g].asset_name?b.list[g].label:b.list[g].asset_name+"("+b.list[g].label+")")+", "+b.list[g].value,b.list[g].label=""==b.list[g].asset_name?b.list[g].label:b.list[g].asset_name):"dstn_port"==w.section_name&&(b.list[g].label=" Port No : "+b.list[g].label)}c=null,C(),a===!0&&void 0!=$.Dashboard.chartInstance[e]?$.Dashboard.chartInstance[e].setJSONData({chart:F,categories:[],data:b.list}):FusionCharts.ready(function(){$.Dashboard.chartInstance[e]=new FusionCharts({type:"bar2d",renderAt:"chart-container_"+e,width:"100%",height:240,dataFormat:"json",dataSource:{chart:F,categories:[],data:b.list}}).render()})};w.section_name.indexOf("_ip")==-1&&(delete y.label_type,l.remove(),k.remove()),$("body").requestData(u,y,{callback:b})},E=function(){p.val(y.group_cd),q.val(y.log_cate_cd),m.val(y.last_period),n.val(y.label_type),o.val(y.rows),g.find("[name=list_yn]:input[value="+y.list_yn+"]").prop("checked",!0)},F={caption:"",subCaption:"",xAxisName:"",yAxisName:"Count",numberPrefix:"",maxLabelWidthPercent:"20"},G=function(){y.last_period=m.val(),y.label_type=n.val(),y.rows=o.val(),y.list_yn=g.find("[name=list_yn]:checked").val(),y.curDate=(new Date).getTime(),y.section_name=w.section_name,y.log_cate_cd=q.val(),y.group_cd=p.val()},H=function(){C(),D(!0)},I=function(){q.html('<option value="">[선택하세요]</option>');for(var a in ComCodes.CS0010)q.append($("<option>").val(a).text(ComCodes.CS0010[a]))},J=function(){p.html('<option value="">[선택하세요]</option>');for(var a in ComCodes.CS0011)p.append($("<option>").val(a).text(ComCodes.CS0011[a]))};return{config_param:y,component_title:v,load:A,refresh:D,showConfig:E,beforeSaveConfig:G,afterSaveConfig:H}};