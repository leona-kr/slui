"use strict";var goPerformance=function(a,b,c){var d=c.split(":"),e=_SL.formatDate().substring(0,8)+d[0]+d[1],f=_SL.formatDate.addMin(e,-10),g=gCONTEXT_PATH+"monitoring/performance_view.html?s_eqp_type_cd="+a+"&s_eqp_ip="+b+"&start_time="+f+"&end_time="+e;window.open(g,"SystemView"+(new Date).getTime())};_SL.nmspc("slapp.component").system_status=function(a,b,c){var d,e=a,f=b,g=c,h={bLoaded:!1},i=[],j=gCONTEXT_PATH+"component/system_status.json",k=(gCONTEXT_PATH+"component/eqp_list.json",gCONTEXT_PATH+"monitoring/performance_view.html",$("#system-status-"+e)),l=$("#config_"+e+" form"),m=k.find(".sp-title"),n=l.find("[name=eqp_ip]"),o=$("#cpu_stat_"+e),p=$("#memory_stat_"+e),q=$("#read_stat_"+e),r=function(){this.config_param=f,w=$.extend(this.chartstyles,w),w.paletteColors=w.unitColor,FusionCharts&&(FusionCharts.items[e+"_id"]=null,delete FusionCharts.items[e+"_id"]),n.chosen({search_contains:!0,width:"100%"}),s()},s=function(a){var b=$.extend({curDate:(new Date).getTime()},h,f),c=function(b){i=b.EQP_LIST;var c=b.chartData,g=JSON.parse(i),j="";for(var k in g)f.eqp_ip==g[k].eqp_ip&&(j=g[k].eqp_type_cd);"undefined"==typeof b.cpu&&(b.cpu="-"),"undefined"==typeof b.memory&&(b.memory="-"),"undefined"==typeof b.read_bytes&&(b.read_bytes="-"),"undefined"==typeof b.write_bytes&&(b.write_bytes="-"),o.text(" "+b.cpu+"%"),p.text(" "+b.memory+"%"),q.text(" "+_SL.formatNumber(b.read_bytes)+"/"+_SL.formatNumber(b.write_bytes));for(var l={chart:w,categories:[{category:c}],dataset:[]},n=[],r=[],s=0,t=0==c.length?"":c.length-1,k=0,u=c.length;k<u;k++)s=Math.max(Math.max(c[k].value,c[k].value2),s),n[k]={value:c[k].value,link:'javascript:goPerformance("'+j+'","'+f.eqp_ip+'","'+c[t].label+'")'},r[k]={value:c[k].value2,link:'javascript:goPerformance("'+j+'","'+f.eqp_ip+'","'+c[t].label+'")'};if(l.chart.yAxisMaxValue=_SL.getChartMaxValue(s),""!=t?(d=b.chartData[t].label,l.chart.logoLink="javascript:goPerformance('"+j+"','"+f.eqp_ip+"','"+c[t].label+"')"):d=_SL.formatDate(_SL.formatDate(),"yyyyMMddHHmm","HH:mm"),l.dataset[0]={seriesname:"Inbound",color:"#89cf43",data:n},l.dataset[1]={seriesname:"Outbound",color:"#0099ff",data:r},!h.bLoaded){if(!b.eqp_ip)return;h.title=b.eqp_nm+"["+b.eqp_ip+"]",h.bLoaded=!0,f.eqp_ip||(f.eqp_ip=b.eqp_ip),m.html("<a href=\"javascript:goPerformance('"+j+"','"+f.eqp_ip+"','"+d+"');\"><h5>"+h.title+"</h5></a>")}a===!0&&void 0!=$.Dashboard.chartInstance[e]?$.Dashboard.chartInstance[e].setJSONData(l):FusionCharts.ready(function(){$.Dashboard.chartInstance[e]=new FusionCharts({type:"msarea",renderAt:"chart-container-"+e,width:"100%",height:"200",dataFormat:"json",dataSource:l}).render()})};$("body").requestData(j,b,{callback:c})},t=function(){n.empty();for(var a in EquipList){var b=EquipList[a];n.append('<option value="'+b.eqp_ip+'">'+b.eqp_nm+"["+b.eqp_ip+"]</option>")}n.val(f.eqp_ip),n.trigger("chosen:updated")},u=function(){var a=n.find("option:selected").val(),b=n.find("option:selected").text();""==a?delete f.eqp_ip:(f.eqp_ip=a,h.title=b,m.html("<a href=\"javascript:$.Dashboard.componentInstance['"+e+"'].goPerformance();\"><h5>"+h.title+"</h5></a>"))},v=function(){s(!0)},w={plotfillalpha:"60",showValues:"0"};return{containerId:e,config_param:f,component_title:g,options:h,load:r,refresh:s,showConfig:t,beforeSaveConfig:u,afterSaveConfig:v,goPerformance:goPerformance}};