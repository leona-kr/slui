"use strict";_SL.nmspc("login").form=function(){var a={form:"[name=formLogin]",userId:"[name=userId]",userPswd:"[name=userPswd]",checkSave:"[name=checkSave]",btnLogin:".btn-login",cookieUserId:"saveUserId",urlLogin:gCONTEXT_PATH+"login/login.do",urlGetKey:gCONTEXT_PATH+"login/get_key.json",urlLicenseCheck:gCONTEXT_PATH+"common/license_check.json"},b={form:$(a.form),userId:$(a.userId),userPswd:$(a.userPswd),checkSave:$(a.checkSave),btnLogin:$(a.btnLogin)},c=function(){var c;if(b.userId.on("keyup",d),b.userPswd.on("keyup",d),b.btnLogin.on("click",e),""==b.userId.val()){if(!(c=$.cookie(a.cookieUserId)))return void b.userId.focus();b.userId.val(c),b.checkSave.prop("checked",!0)}b.userPswd.focus(),slui.notices.licence()},d=function(){13==event.keyCode&&e()},e=function(){_SL.validate()&&(b.checkSave.prop("checked")?$.cookie(a.cookieUserId,b.userId.val(),{expires:30}):$.cookie(a.cookieUserId,""),f(!1))},f=function(c){$("body").requestData(a.urlGetKey,{},{callback:function(a){var d=new RSAKey;d.setPublic(a.publicKeyModulus,a.publicKeyExponent);var e=d.encrypt(b.userId.val()),f=d.encrypt(b.userPswd.val());g(c,e,f)}})},g=function(b,c,d){var e={userId:c,userPswd:d,forceLogin:b?"Y":"N"};$("body").requestData(a.urlLogin,e,{callback:function(b,c,d){var e;switch(c){case"INF_LI_0001":e=$.cookie(a.cookieUserId),e=b.loginUrl&&""!=b.loginUrl?b.loginUrl:gCONTEXT_PATH,b.popupNotice&&(e+=(e.indexOf("?")==-1?"?":"&")+"popupNotice=Y"),location.href=e;break;case"INF_LI_0010":_confirm(b.rsMsg,{onAgree:function(){f(!0)}});break;default:_alert(d)}}})};c()}();