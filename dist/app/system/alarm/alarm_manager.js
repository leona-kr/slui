"use strict";_SL.nmspc("alarm").manager=function(){var a={formId:"#formAlarmManager",urlUserList:gCONTEXT_PATH+"system/comuser_list_to_select.html",urlSave:gCONTEXT_PATH+"system/alarm_manager_save.do"},b={form:$(a.formId)},c=function(){d()},d=function(){b.form.find(".btn-plus").off().on("click",function(){new ModalPopup(a.urlUserList,{width:900,height:600,setScroll:!0,onClose:function(){e()}})}),b.form.find(".btn-minus").off().on("click",function(){b.form.find("[name=chk_user_list] :selected").remove()}),b.form.find(".btn-save").off().on("click",f)},e=function(){var a,c,d,e,f,g=slapp.user.listSel.getParam(),h=g.userDataArr,i=(g.userIdx,b.form.find("[name=chk_user_list] option")),j=0,k=!1,l="";for(var m in h)a=h[m],c=a.user_id,d=a.user_nm,e=a.mobile_no,f=a.mail_addr,0==i.length?b.form.find("[name=chk_user_list]").append("<option value='"+c+"'>"+d+" ["+c+"], ["+e+"], ["+f+"]</option>"):(b.form.find("[name=chk_user_list] option").each(function(){c==$(this).val()&&(j=1)}),1!=j?b.form.find("[name=chk_user_list]").append("<option value='"+c+"'>"+d+" ["+c+"], ["+e+"], ["+f+"]</option>"):(k?l+=", "+c:(l+="해당 ID가 이미 존재합니다.<br>(ID : "+c,k=!0),j=0));k&&_alert(l+" )")},f=function(){var c=new Array;new Array;b.form.find("input[name=alarm_cd]:checked").each(function(){c.push(this.value)}),$("option","[name=chk_user_list]").each(function(){this.selected=!0});var d=_SL.serializeMap(b.form);$.extend(d,{alarm_cd_arr:c}),$("option","[name=chk_user_list]").each(function(){this.selected=!1}),$("body").requestData(a.urlSave,d,{callback:function(a,b,c){b?"SUC_COM_0004"==b?_alert(c,{onAgree:function(){location.reload()}}):_alert("저장 처리중 에러가 발생했습니다.<br> 다시 실행하세요."):_alert("적용중 에러가 발생했습니다.<br>다시 실행하거나 수정권한이 있는지 확인해 주세요.")}})};return{init:c}}(),$(function(){slapp.alarm.manager.init(),$("#btnRiskSettting").click(function(){new ModalPopup(gCONTEXT_PATH+"system/risk_ruleset_form.html",{width:650,height:530,onClose:function(){location.reload()}})})});