"use strict";_SL.nmspc("user").logined=function(){var a={gridId:"#gridLoginUser",formId:"#searchLoginUser",urlList:gCONTEXT_PATH+"system/login_user_list.json",urlDisconnect:gCONTEXT_PATH+"system/disconnect_user.do"},b={grid:$(a.gridId),form:$(a.formId)},c=function(){var a=b.grid.parent().siblings(".grid-bottom").find(".btn-disconnect");d(b.grid),b.form.find(".form-submit").on("click",function(){e()}),a.off().on("click",function(){var a=[],c=b.grid.jqxGrid("getselectedrowindexes");if(c.length>0){for(var d=0,e=c.length;d<e;d++)a.push(b.grid.jqxGrid("getrowdata",c[d]).user_id);f(a)}else _alert("선택한 사용자가 없습니다.")})},d=function(c){var d={datatype:"json",datafields:[{name:"user_id",type:"string"},{name:"user_nm",type:"string"},{name:"mobile_no",type:"string"},{name:"mail_addr",type:"string"},{name:"group_nm",type:"string"},{name:"last_conn_dt",type:"string"}],root:"rows",beforeprocessing:function(a){null!=a&&(d.totalrecords=a.totalRows)},cache:!1,url:a.urlList},e=new $.jqx.dataAdapter(d,{beforeLoadComplete:function(a){for(var b in a)a[b].last_conn_dt&&(a[b].last_conn_dt=_SL.formatDate(a[b].last_conn_dt,"yyyyMMddHHmmss","yyyy-MM-dd HH:mm:ss"));return a},formatData:function(a){var c,d={},e=b.form.serializeArray();for(c in e)d[e[c].name]=e[c].value;return $.extend(a,d),a},loadError:function(a,b,c){alert(c)}});c.jqxGrid({source:e,sortable:!0,width:"100%",virtualmode:!0,selectionmode:"checkbox",enablehover:!1,rendergridrows:function(a){return a.data},columns:[{text:"No",columntype:"number",width:40,cellsalign:"center",cellsrenderer:function(a,b,c,d){return $(d).text(c+1)[0].outerHTML}},{text:"아이디",datafield:"user_id"},{text:"이름",datafield:"user_nm",cellsalign:"center",width:"15%",cellsrenderer:function(a,b,c,d,e,f){return $(d).html('<button type="button" class="btn-link">'+c+"</button>")[0].outerHTML}},{text:"기관",datafield:"group_nm",width:"15%"},{text:"휴대폰번호",datafield:"mobile_no",cellsalign:"center",width:"15%"},{text:"이메일",datafield:"mail_addr"},{text:"최근접속시간",datafield:"last_conn_dt",cellsalign:"center",width:"15%"}]}),c.on("cellclick",function(a){if("user_nm"===a.args.datafield){var b=a.args.row.bounddata.user_id;f([b])}})},e=function(){b.grid.jqxGrid("updatebounddata")},f=function(b){_confirm("선택한 사용자를 로그아웃 하시겠습니까?",{onAgree:function(){$("body").requestData(a.urlDisconnect,{user_list:b},{callback:function(a){e()}})}})};return{init:c}}(),$(function(){slapp.user.logined.init()});