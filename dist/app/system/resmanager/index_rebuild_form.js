"use strict";_SL.nmspc("resmanager").form=function(){var a={formId:"#formRebuildForm",urlSelect:gCONTEXT_PATH+"system/index_rebuild_select.json",add:{action:gCONTEXT_PATH+"system/index_rebuild_insert.do",message:"등록 하시겠습니까?"},update:{action:gCONTEXT_PATH+"system/index_rebuild_update.do",message:"수정 하시겠습니까?"}},b={form:$(a.formId),requestId:$(a.formId+" [name=request_id]"),rebuildStartDay:$(a.formId+" [name=rebuildStartDay]"),rebuildStartHour:$(a.formId+" [name=rebuildStartHour]"),rebuildStartMin:$(a.formId+" [name=rebuildStartMin]"),rebuildEndDay:$(a.formId+" [name=rebuildEndDay]"),rebuildEndHour:$(a.formId+" [name=rebuildEndHour]"),rebuildEndMin:$(a.formId+" [name=rebuildEndMin]")},c={isNew:""==b.requestId.val(),mode:""==b.requestId.val()?a.add:a.update},d=function(){console.log(c.isNew),c.isNew||e(),f()},e=function(){var c=b.requestId.val(),d={request_id:c},e=function(a){_SL.setDataToForm(a.data,b.form);var c=a.data.proc_start_dt,d=a.data.proc_end_dt,e=function(a,b){var c=a.siblings(".tform-select");c.find(".tform-select-t").text(b).end().find(".tform-select-option[data-value="+b+"]").addClass("selected").end(),a.val(b)};e(b.form.find("[name=rebuildStartDay]"),c.substring(0,8)),e(b.form.find("[name=rebuildStartHour]"),c.substring(8,10)),e(b.form.find("[name=rebuildStartMin]"),c.substring(10,12)),e(b.form.find("[name=rebuildEndDay]"),d.substring(0,8)),e(b.form.find("[name=rebuildEndHour]"),d.substring(8,10)),e(b.form.find("[name=rebuildEndMin]"),d.substring(10,12))};$("body").requestData(a.urlSelect,d,{callback:e})},f=function(){b.form.find(".btn-save").on("click",g)},g=function(){var d=b.form.find("[name=rebuildStartDay]").val()+b.form.find("[name=rebuildStartHour]").val()+b.form.find("[name=rebuildStartMin]").val(),e=b.form.find("[name=rebuildEndDay]").val()+b.form.find("[name=rebuildEndHour]").val()+b.form.find("[name=rebuildEndMin]").val(),f=_SL.formatDate.diff(d+"00",e+"00");if(f<0)return void _alert("대상기간의 종료시간이 시작시간보다 커야 합니다.");if(f=_SL.formatDate.diff(e+"00",_SL.formatDate("yyyyMMddHHmm")+"00"),f<0)return void _alert("대상기간의 종료시간은 현재시간과 같거나 작아야 합니다.");if(_SL.validate()){var g=1==$(this).data("after-close"),i="";i=c.isNew?a.add.action:a.update.action,$("body").requestData(i,_SL.serializeMap(b.form),{callback:function(a,b,d){if("SUCCESS"==a.RESULT_CODE){var e="";e=c.isNew?"요청을 완료하였습니다.":"수정을 완료하였습니다.",_alert(e,{onAgree:function(){h(g)}})}else"ERROR"==a.RESULT_CODE?_alert(a.RESULT_MESSAGE,{onAgree:function(){h(g)}}):"FAIL"==a.RESULT_CODE&&_alert(a.RESULT_MESSAGE,{onAgree:function(){h(g)}})},displayLoader:!0})}},h=function(a){a&&b.form.find("[data-layer-close=true]").click()};return{init:d}}(),$(function(){slapp.resmanager.form.init()});