"use strict";_SL.nmspc("contents").form=function(){var a={formId:"#formContents",urlNetworkChk:gCONTEXT_PATH+"system/ping_check.json",urlIntelAction:gCONTEXT_PATH+"system/intelligence_action.json",urlUpdateContents:gCONTEXT_PATH+"system/update_contents.json",urlSelectContents:gCONTEXT_PATH+"system/select_contents.do"},b=({form:$(a.formId),actionCode:$(a.formId+" [name=action_code]")},function(){c(),d()}),c=function(){$("#contents").find("button").on("click",function(){e(2,this.value)})},d=function(){$("body").requestData(a.urlNetworkChk,{},{callback:function(a){a<0?$("#network_status").html('<div class="text-attention">업데이트서버에<br>접속할수없습니다.</div>'):($("#network_status").text("업데이트가 가능합니다."),$("#contents").find("button").prop("disabled",!1),e(1,0))}})},e=function(b,c){var d=b,e=c;"2"==d&&$("#upd_btn_"+c).prop("disabled")||($("#status_"+e).text("요청"),$("body").requestData(a.urlIntelAction,{action_code:d,contents_id:e},{callback:function(a){if("1"==d)for(var b=$.parseJSON(a),g=0;g<b.length;g++)$("#tot_cnt_"+b[g].content_id).text(b[g].cnt),0==b[g].cnt&&($("#upd_btn_"+b[g].content_id).prop("disabled",!0),$("#upd_btn_"+b[g].content_id).attr("onclick",null).off("click"));else if("2"==d){var b=$.parseJSON("["+a+"]");""!=b[0].fname?($("#status_"+c).text("업데이트중..."),$("#loading_"+c).show(),setTimeout(function(){f(b[0].content_id,b[0].fname)},1e3)):$("#status_"+e).text("오류")}}}))},f=function(b,c){$("body").requestData(a.urlUpdateContents,{contents_id:b,fname:c},{callback:function(a){$("#loading_"+b).hide(),parseInt(a)>0?($("#status_"+b).text("완료"),g(b)):$("#status_"+b).text("오류")}})},g=function(b){$("body").requestData(a.urlSelectContents,{contents_id:b},{callback:function(a){var c=$.parseJSON(a);$("#down_cnt_"+b).text(c.download_cnt),$("#update_dt_"+b).text(c.update_dt_format)}})};return{init:b}}(),$(function(){slapp.contents.form.init(),$.fn.rowspan=function(a,b){return this.each(function(){var c;$("tr",this).each(function(d){$(".list-head:eq("+a+")",this).filter(":visible").each(function(a){if($(this).html()==$(c).html()&&(!b||b&&$(this).prev().html()==$(c).prev().html())){var d=$(c).attr("rowspan")||1;d=Number(d)+1,$(c).attr("rowspan",d),$(this).hide()}else c=this;c=null==c?this:c})})})},$("#contents").rowspan(0)});