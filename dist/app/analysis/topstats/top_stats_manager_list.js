"use strict";_SL.nmspc("topStatsManager").list=function(){var a={gridId:"#gridTopStatsList",urlList:gCONTEXT_PATH+"analysis/top_stats_manager_list.json",urlOnOff:gCONTEXT_PATH+"analysis/top_stats_manager_onoff.json"},b={grid:$(a.gridId)},c=function(){d(b.grid),e()},d=function(b){var c={datatype:"json",datafields:[{name:"top_code",type:"string"},{name:"top_name",type:"string"},{name:"search_condition",type:"string"},{name:"use_yn",type:"string"},{name:"order_no",type:"string"},{name:"proc_id",type:"string"},{name:"proc_ip",type:"string"},{name:"proc_dt",type:"string"}],root:"rows",beforeprocessing:function(a){null!=a&&(c.totalrecords=a.totalRows)},cache:!1,url:a.urlList},d=new $.jqx.dataAdapter(c,{beforeLoadComplete:function(a){},formatData:function(a){var b={};return $.extend(a,b),a},loadError:function(a,b,c){alert(c)}});b.jqxGrid({source:d,sortable:!0,width:"100%",virtualmode:!0,enablehover:!1,rendergridrows:function(a){return a.data},columns:[{text:"상태",datafield:"use_yn",width:50,cellsalign:"center",cellsrenderer:function(a,b,c,d,e,f){var g="on",h="1";return"N"==c&&(g="off",h="0"),$(d).css("margin-top","4px").html('<button type="button" data-top_code="'+f.top_code+'" class="onoff-icon btn-switch-'+g+'" value="'+h+'" data-switch-toggle="true"><span class="text-on">ON</span><span class="text-off">OFF</span></button>')[0].outerHTML}},{text:"No",columntype:"number",width:40,cellsalign:"center",cellsrenderer:function(a,b,c,d){return $(d).text(c+1)[0].outerHTML}},{text:"분석명",datafield:"top_name"}]})},e=function(){var a=b.grid.parent().siblings(".grid-bottom").find(".btn-apply");a.off().on("click",function(){f()})},f=function(){var c=[];b.grid.find("*[class*='btn-switch-']").each(function(){c.push({top_code:$(this).data("top_code"),use_yn:"1"==$(this).val()?"Y":"N"})}),0==c.length?_alert("On/Off 적용할 건을 선택하세요."):$("body").requestData(a.urlOnOff,c,{callback:function(a,c,d){_alert(d),b.grid.parent().siblings(".grid-bottom").find("[data-layer-close=true]").click(),slapp.topstats.list.init()}})};return{init:c}}(),$(function(){slapp.topStatsManager.list.init()});