"use strict";_SL.nmspc("collector").list=function(){var a={urlList:gCONTEXT_PATH+"management/collector_list.json",urlForm:gCONTEXT_PATH+"management/collector_form.html",urlInfo:gCONTEXT_PATH+"management/jws_connector.do",formId:"#searchCollectorList",gridId:"#gridCollectorList"},b={form:$(a.formId),grid:$(a.gridId)},c=function(){var c=b.grid.parent().siblings(".grid-bottom").find(".btn-add");d(b.grid),b.form.find(".form-submit").off().on("click",function(){_SL.validate(b.form)&&e()}),c.off().on("click",function(){f(a.urlForm)})},d=function(b){var c={datatype:"json",datafields:[{name:"collector_id",type:"string"},{name:"collector_nm",type:"string"},{name:"collector_ip",type:"string"}],root:"rows",beforeprocessing:function(a){null!=a&&(c.totalrecords=a.totalRows)},cache:!1,url:a.urlList},d=new $.jqx.dataAdapter(c,{formatData:function(b){var c,d={},e=$(a.formId).serializeArray();for(c in e)d[e[c].name]=e[c].value;return $.extend(b,d),b},loadError:function(a,b,c){alert(c)}});b.jqxGrid({source:d,sortable:!1,width:"100%",virtualmode:!0,rendergridrows:function(a){return a.data},columns:[{text:"No",columntype:"number",width:40,cellsalign:"center",cellsrenderer:function(a,b,c,d){return $(d).text(c+1)[0].outerHTML}},{text:"Collector ID",datafield:"collector_id",width:"20%",cellsrenderer:function(a,b,c,d,e,f){return $(d).html('<button type="button" class="btn-link">'+c+"</button>")[0].outerHTML}},{text:"Collector 이름",datafield:"collector_nm",cellsrenderer:function(a,b,c,d,e,f){return $(d).html('<button type="button" class="btn-link">'+c+"</button>")[0].outerHTML}},{text:"Collector IP",datafield:"collector_ip"},{text:"파서 정보",datafield:"parser_info",cellsalign:"center",width:"10%",cellsrenderer:function(a,b,c,d,e,f){return $(d).html('<button type="button" class="btn-link"><i class="icon-drive"></i> 보기</button>')[0].outerHTML}},{text:"Index 정보",datafield:"idx_info",cellsalign:"center",width:"10%",cellsrenderer:function(a,b,c,d,e,f){return $(d).html('<button type="button" class="btn-link"><i class="icon-drive"></i> 보기</button>')[0].outerHTML}}]}),b.on("cellclick",function(b){if("collector_id"===b.args.datafield||"collector_nm"===b.args.datafield){var c=b.args.row.bounddata.collector_id;f(a.urlForm+"?collector_id="+c)}if("parser_info"===b.args.datafield){var d=b.args.row.bounddata.collector_ip;g(d)}if("idx_info"===b.args.datafield){var d=b.args.row.bounddata.collector_ip;h(d)}})},e=function(){b.grid.jqxGrid("updatebounddata")},f=function(a){new ModalPopup(a,{width:450,height:210,onClose:function(){e()}})},g=function(b){var c=gParserInfoUrl.replace(/@{COLLECTOR_IP}/,b),d=$("#viewForm");0==d.length&&(d=$('<form id="viewForm">'),d.append('<input type="hidden" name="str_url">'),d.append('<input type="hidden" name="svr_type" value="Collector">'),$("body").append(d)),$("[name=str_url]",d).val(c),d.attr({action:a.urlInfo}).submit()},h=function(b){var c=gSearcherUrl.replace(/@{COLLECTOR_IP}/,b)+"/index_list",d=$("#viewForm");0==d.length&&(d=$('<form id="viewForm">'),d.append('<input type="hidden" name="str_url">'),d.append('<input type="hidden" name="svr_type" value="Collector">'),$("body").append(d)),$("[name=str_url]",d).val(c),d.attr({action:a.urlInfo}).submit()};return{init:c}}(),$(function(){slapp.collector.list.init(),$("#btnPatchManager").togglePage(gCONTEXT_PATH+"management/pms_list.html")});