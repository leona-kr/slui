"use strict";_SL.nmspc("parser").form=function(){var a={formId:"#formParser",urlSelect:gCONTEXT_PATH+"management/parser_form.json",urlChkConn:gCONTEXT_PATH+"management/parser_check_delete.json",urlDelete:gCONTEXT_PATH+"management/parser_delete.do",add:{action:gCONTEXT_PATH+"management/parser_add.do",message:"등록 하시겠습니까?"},update:{action:gCONTEXT_PATH+"management/parser_update.do",message:"수정 하시겠습니까?"}},b={form:$(a.formId),psrId:$(a.formId+" [name=psr_id]")},c={isNew:""==b.psrId.val(),mode:""==b.psrId.val()?a.add:a.update},d=function(){e(),c.isNew&&b.form.find(".btn-delete").hide(),c.isNew||f()},e=function(){b.form.find(".btn-save").on("click",g),b.form.find(".btn-delete").on("click",h)},f=function(){var c=b.psrId.val(),d={psr_id:c},e=function(a){_SL.setDataToForm(a,b.form,{})};$("body").requestData(a.urlSelect,d,{callback:e})},g=function(){if(_SL.validate(b.form)){var a=1==$(this).data("after-close");$("body").requestData(c.mode.action,_SL.serializeMap(b.form),{callback:function(b,c,d){_alert(d,{onAgree:function(){i(a)}})}})}},h=function(){var c=b.psrId.val(),d=1==$(this).data("after-close"),e=function(){_confirm("삭제하시겠습니까?",{onAgree:function(){$("body").requestData(a.urlDelete,{psr_id:c},{callback:function(a,b,c){_alert(c,{onAgree:function(){i(d)}})}})}})};$("body").requestData(a.urlChkConn,{psr_id:c},{callback:function(a){"OK"==a?e():"EXIST"==a?_alert("연동중이므로 삭제할 수 없습니다."):_alert("연동 여부 체크에 실패했습니다.<br> 다시 시도하세요.")}})},i=function(a){a&&b.form.find("[data-layer-close=true]").click()};return{init:d}}(),$(function(){slapp.parser.form.init()});