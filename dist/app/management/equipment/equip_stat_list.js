"use strict";_SL.nmspc("equipment").statList=function(){var a={urlList:gCONTEXT_PATH+"management/equip_stat_list.json",formId:"#searchEquipStatList",gridId:"#gridEquipStatList"},b={form:$(a.formId),grid:$(a.gridId)},c=function(){b.form.find("[name=s_eqp_type_cd]").chosen({search_contains:!0}),d(b.grid),b.form.find(".btn-submit").off().on("click",function(){_SL.validate(b.form)&&e()})},d=function(b){var c={datatype:"json",datafields:[{name:"eqp_type_cd",type:"string"},{name:"eqp_type_nm",type:"string"},{name:"eqp_id",type:"string"},{name:"eqp_nm",type:"string"},{name:"eqp_ip",type:"string"},{name:"collect_allow_time",type:"string"},{name:"agent_ip",type:"string"},{name:"stat_chk_port",type:"string"},{name:"stat_chk_msg",type:"string"},{name:"stat_chk_type",type:"string"},{name:"stat_result",type:"string"},{name:"collect_yn",type:"string"},{name:"stat_chk_time",type:"string"},{name:"last_collect_time",type:"string"}],root:"rows",beforeprocessing:function(a){null!=a&&(c.totalrecords=a.totalRows)},cache:!1,url:a.urlList},d=new $.jqx.dataAdapter(c,{beforeLoadComplete:function(a){for(var b in a)"-"!=a[b].last_collect_time&&(a[b].last_collect_time=_SL.formatDate(a[b].last_collect_time,"yyyyMMddHHmm","yyyy-MM-dd HH:mm"));return a},formatData:function(b){var c,d={},e=$(a.formId).serializeArray();for(c in e)d[e[c].name]=e[c].value;return $.extend(b,d),b},loadComplete:function(){f()},loadError:function(a,b,c){_1(c)}});b.jqxGrid({source:d,sortable:!0,width:"100%",virtualmode:!0,rendergridrows:function(a){return a.data},columns:[{text:"No",columntype:"number",width:40,cellsalign:"center",cellsrenderer:function(a,b,c,d){return $(d).text(c+1)[0].outerHTML}},{text:"장비명",datafield:"eqp_nm"},{text:"장비종류",datafield:"eqp_type_nm",width:"15%",cellsalign:"center"},{text:"장비 IP",datafield:"eqp_ip",width:"18%",cellsalign:"center"},{text:"수집상태",datafield:"collect_yn",width:"10%",cellsalign:"center",cellsrenderer:function(a,b,c,d,e,f){var g;switch(f.collect_allow_time){case 5:case 10:case 30:g=f.collect_allow_time+"분";break;case 60:case 180:case 360:case 720:g=f.collect_allow_time/60+"시간";break;case 1440:g="1일";break;default:g="장비의 정상수집 허용기간"}return"Y"==c?$(d).html('<span class="label-success hasTooltip" data-value="['+g+' 기준]">수집</span>')[0].outerHTML:"N"==c?$(d).html('<span class="label-danger hasTooltip" data-value="['+g+' 기준]">미수집</span>')[0].outerHTML:void 0}},{text:"상태",datafield:"stat_result",cellsalign:"center",width:"10%",cellsrenderer:function(a,b,c,d,e,f){if("-"==f.stat_chk_type)return $(d).html("-")[0].outerHTML;var g="* 최종 체크 시간 ["+f.stat_chk_time+"]";return"normal"==c?$(d).html('<span class="label-success hasTooltip" data-value="'+g+'">정상</span>')[0].outerHTML:"abnormal"==c?$(d).html('<span class="label-danger hasTooltip" data-value="'+g+'">비정상</span>')[0].outerHTML:void 0}},{text:"최종 수집시간",datafield:"last_collect_time",cellsalign:"center",width:"12%"}]}),b.on("cellclick",function(a){"eqp_nm"===a.args.datafield})},e=function(){b.grid.jqxGrid("updatebounddata")},f=function(){setTimeout(function(){b.grid.find(".hasTooltip").each(function(a){var b=$(this).data("value");$(this).jqxTooltip({position:"mouse",content:b})})},500)};return{init:c}}(),$(function(){slapp.equipment.statList.init()});