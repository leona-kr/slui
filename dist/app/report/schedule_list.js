"use strict";_SL.nmspc("schedule").list=function(){var a={gridId:"#gridReportSchedule",formId:"#searchReportSchedule",urlList:gCONTEXT_PATH+"report/schedule_list.json",urlForm:gCONTEXT_PATH+"report/schedule_form.html"},b={grid:$(a.gridId),form:$(a.formId)},c=function(){var c=b.grid.parent().siblings(".grid-bottom").find(".btn-add");d(b.grid),b.form.find(".form-submit").on("click",function(){e()}),c.off().on("click",function(){f(a.urlForm)})},d=function(c){var d={datatype:"json",datafields:[{name:"schedule_id",type:"string"},{name:"report_nm",type:"string"},{name:"gen_cycle",type:"string"},{name:"gen_cycle_nm",type:"string"},{name:"gen_day",type:"string"},{name:"gen_start_time",type:"string"},{name:"schd_stat",type:"string"},{name:"schd_stat_nm",type:"string"},{name:"file_format_list",type:"string"}],root:"rows",beforeprocessing:function(a){null!=a&&(d.totalrecords=a.totalRows)},cache:!1,url:a.urlList},e=new $.jqx.dataAdapter(d,{beforeLoadComplete:function(a){for(var b in a)0==a[b].gen_cycle?a[b].gen_start_time=_SL.formatDate(a[b].gen_start_time,"yyyyMMddHHmm","yyyy-MM-dd HH:mm"):a[b].gen_start_time=_SL.formatDate(a[b].gen_start_time,"yyyyMMddHHmm","HH:mm"),a[b].gen_cycle=a[b].gen_cycle_nm+a[b].gen_day;return a},formatData:function(a){var c,d={},e=b.form.serializeArray();for(c in e)d[e[c].name]=e[c].value;return $.extend(a,d),a},loadError:function(a,b,c){alert(c)}});c.jqxGrid({source:e,sortable:!0,width:"100%",virtualmode:!0,enablehover:!1,rendergridrows:function(a){return a.data},columns:[{text:"No",columntype:"number",width:40,cellsalign:"center",cellsrenderer:function(a,b,c,d){return $(d).text(c+1)[0].outerHTML}},{text:"보고서명",datafield:"report_nm",cellsalign:"center",width:"28%",cellsrenderer:function(a,b,c,d,e,f){return $(d).html('<button type="button" class="btn-link">'+c+"</button>")[0].outerHTML}},{text:"생성주기",datafield:"gen_cycle",cellsalign:"center"},{text:"실행시간",datafield:"gen_start_time",cellsalign:"center"},{text:"상태",datafield:"schd_stat_nm",cellsalign:"center"},{text:"요청파일",datafield:"file_format_list",cellsalign:"center",width:"12%",cellsrenderer:function(a,b,c,d,e,f){var g="",h={};h=c.split(",");for(var i=0;i<h.length;i++){switch(h[i]){case"docx":h[i]="word";break;case"xlsx":h[i]="xls";break;case"pptx":h[i]="ppt"}g+=" <i class='icon-"+h[i]+"'></i> "}return $(d).html(g)[0].outerHTML}}]}),c.on("cellclick",function(b){if("report_nm"===b.args.datafield){var c=b.args.row.bounddata.schedule_id;f(a.urlForm+"?schedule_id="+c)}})},e=function(){b.grid.jqxGrid("updatebounddata")},f=function(a){new ModalPopup(a,{width:740,height:490,onClose:function(){e()}})};return{init:c}}(),$(function(){slapp.schedule.list.init()});